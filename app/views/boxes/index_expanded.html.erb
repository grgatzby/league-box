<!-- list of all boxes -->
<div class="<%= class_names("text-size", "container": !@is_mobile) %>">
  <% if !@is_mobile %><br><% end %>
  <div class="one-liner">
    <h3><%= t '.all_box_title' %></h3>
    <span class="will-print"><%= image_tag "box_league_racket.png", alt: "Tennis racket", width: 50 %> LeagueBox Â©</span>
  </div>
  <% if @round %>
    <div class = "<%= class_names("one-liner": !@is_mobile) %>">
      <%= render "shared/select_club", fallback_path: index_expanded_path %>
      <%= render "shared/select_round", fallback_path: index_expanded_path %>
      <div>
        <%= render 'shared/stats' %>
        <% if current_user && current_user.role != "player" %>
          <%# link_to t('.to_csv_btn'), csv_boxes_path(round_id: @round.id), class: "btn buttons-shape btn-green dont-print mb-3" %>
        <% end %>
        <%= link_to t('.all_boxes_btn'), boxes_path, class: "btn buttons-shape btn-green dont-print mb-3" %>
        <%= link_to t('print_btn'), '#', :onclick => 'window.print();return false;', class: "btn buttons-shape btn-green dont-print mb-3"%>
      </div>
    </div>

    <div class="print-all-content box-scroller">

      <% @boxes.each do |box| %>
        <%= render "grid_view", box: box, is_this_my_box: my_box?(box), box_matches: box_matches(box), page_from: index_expanded_path %>
        <br>
      <% end %>
    </div>

    <div class="buttons-wrap dont-print">
      <% if current_user == @admin %>
        <%= link_to t(".load_scores"), load_scores_path(round_id: @round.id), class: "btn buttons-shape btn-aqua me-3" %>
      <% end %>
      <% if current_user && current_user.role == "admin" && @new_round_required %>
          <%# allow referee/admin to create next round up to 15 days before or 300 days after end of last round
          time related condition embedded in @new_round_required %>
          <%= link_to t(".create_round_btn"), new_round_path(club_id: @round.club_id), class: "btn buttons-shape btn-aqua" %>
      <% elsif current_user && (["referee", "player referee"].include?(current_user.role)) && @new_round_request%>
          <%= link_to t(".request_round_btn"), new_contact_path(round_id: @round.id), class: "btn buttons-shape btn-aqua" %>
      <% end %>
    </div>
  <% else %>
    <div class="dont-print">
      <%# if no round selected, invoke forms to select a club (admin only) and a round %>
      <%= render "shared/select_club_round", fallback_path: index_expanded_path, explain_paragraph: t(".intro") %>
    </div>
  <% end %>
</div>
