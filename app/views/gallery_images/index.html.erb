<%= render "shared/image_front" %>

<div class="container-fluid px-2 px-md-3 px-lg-4">
  <div class="frame-color-shape frame-padding frame-margin-rl text-size" data-controller="gallery-filter">
    <br><h4><div class="title"><b><%= t(".gallery_title").upcase %></b></div></h4><br>

    <% if current_user %>
      <div class="d-flex justify-content-end mb-3">
        <%= link_to t(".new_image"), new_gallery_image_path, class: "btn btn-shape btn-yellow text-size" %>
      </div>
    <% end %>

    <% if @gallery_images_by_club.present? && @gallery_images_by_club.any? %>
      <div class="mb-3">
        <input type="text"
               class="form-control"
               placeholder="<%= t(".filter_by_caption") %>"
               data-action="input->gallery-filter#filter"
               data-gallery-filter-target="search">
      </div>
      <p class="d-none text-muted" data-gallery-filter-target="noResults">
        <%= t(".no_results") %>
      </p>

      <%# Display images grouped by club for all users %>
      <% @gallery_images_by_club.each do |club, gallery_images| %>
        <% next if club.nil? %>
        <%= render "club_section", club: club, gallery_images: gallery_images %>
      <% end %>
    <% else %>
      <p><%= t(".no_images") %></p>
    <% end %>
  </div>
</div>
