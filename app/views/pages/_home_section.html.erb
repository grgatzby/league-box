<%#
  Home Section Partial
  Renders a collapsible section with header and content.
  Parameters:
    section_number: Section number for Stimulus data attributes
    icon: Icon emoji string or HTML content
    title_key: Translation key for section title (e.g., "welcome_title" without leading dot)
    home_t: Translation helper lambda (used for both section title and content translations)
  Note:
    The home_t helper is used to translate both the section title (via title_key) and
    all translation keys within the yielded content block. This ensures consistent use
    of the "pages.home" scope throughout the section.
%>
<section class="home-section mb-4">
  <%# Section Header: Clickable toggle header with icon and arrow %>
  <div class="home-section-header" data-action="click->toggle#toggleSection" data-section="<%= section_number %>">
    <h2 class="mb-0 d-flex align-items-center gap-2">
      <% if icon.is_a?(String) && !icon.include?('<') %>
        <span class="section-icon"><%= icon %></span>
      <% else %>
        <%= icon.html_safe %>
      <% end %>
      <b class="cursor-pointer flex-grow-1">
        <% if local_assigns[:home_t] %>
          <%= home_t[title_key] %>
        <% else %>
          <%= t(".#{title_key}", scope: 'pages.home') %>
        <% end %>
      </b>
      <span class="section-arrow">⬇️</span>
    </h2>
  </div>
  <%# Section Content: Collapsible content (hidden by default) %>
  <div class="home-section-content d-none" data-toggle-target="section<%= section_number %>">
    <div class="mt-3">
      <%= yield %>
    </div>
  </div>
</section>
